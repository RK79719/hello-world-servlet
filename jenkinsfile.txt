pipeline {
    agent any

    tools {
        // Install the Maven version configured as "M3" and add it to the path.
        maven "Maven"
    }

    stages {
        stage('Checkout') {
            steps {
                checkout([$class: 'GitSCM', branches: [[name: '*/master']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'Radha', url: 'https://github.com/RK79719/hello-world-servlet.git']]])
			}
            }
	stage('Test results') {
            steps {
                sh "mvn -Dmaven.test.failure.ignore=true clean test"
			}
            }
	     stage('Build artifacts') {
            steps {
                sh "mvn -Dmaven.test.failure.ignore=true clean package"
			}
            }
            stage('Push artifacts') {
            steps {
                nexusArtifactUploader artifacts: [[artifactId: 'hello-world-servlet-example', classifier: '', file: 'target/declarative-test.war', type: 'war']], credentialsId: 'Nexus', groupId: 'com.geekcap.vmturbo', nexusUrl: '3.19.66.172:8081/nexus/', nexusVersion: 'nexus2', protocol: 'http', repository: 'Releases', version: '1.0'
			}
            }
        }
    }
}